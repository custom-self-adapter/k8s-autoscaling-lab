metric:
  type: "shell"
  timeout: 1000
  shell:
    entrypoint: "python"
    command:
      - "/scripts/metric_nginx_req_duration.py"
    logStderr: true
evaluate:
  type: "shell"
  timeout: 2000
  shell:
    entrypoint: "python"
    command:
      - "/scripts/evaluate.py"
adapt:
  adapt_replicas:
    type: "shell"
    timeout: 1000
    shell:
      entrypoint: "python"
      command:
        - "/scripts/adapt_replicas.py"
  adapt_tag:
    type: "shell"
    timeout: 1000
    shell:
      entrypoint: "python"
      command:
        - "/scripts/adapt_tag.py"
kubernetesMetricSpecs:
  - type: External
    external:
      metric:
        name: nginx_ingress_avg_ms
        selector:
          matchLabels:
            ingress: "kube-znn"
      target:
        type: Value
        value: "2400m"
interval: 15000
minReplicas: 1
maxReplicas: 10
requireKubernetesMetrics: true
logVerbosity: 3
